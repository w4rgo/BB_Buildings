box_residencial_mags=["ItemSodaMdew","PartWoodPile","Skin_Camo1_DZ","ItemMicrolight",
"ItemUltralight","ItemBike","ItemPbx",
"ItemBandage",
"ItemPainkiller"
];
box_residencial_weap=["ItemWatch","ItemCompass","ItemMap","RH_mk22","RH_m1911old","Makarov",
"ItemKnife","ItemMatchbox","LeeEnfield","Winchester1866","Crossbow_DZ",
"Binocular","RH_browninghp","RH_mk22sd","DDOPP_X26_b","ItemCanOpener"];

box_industrial_mags=["PartGeneric","ItemWire","ItemTankTrap","ItemSandbag"];
box_industrial_weap=["ItemToolbox","ItemEtool","ItemHatchet"];


box_farm_mags=["ItemJerrycan","PartWoodPile","ItemHatchet","TrapBear","Skin_Camo3_DZ","Skin_Camo2_DZ",
"RH_8Rnd_762_tt33","RH_6Rnd_44_Mag","RH_8Rnd_9x19_p38","gms_k98_mag","panzergrenade",
"VIL_10Rnd_762x39_SKS","gms_mp40_mag","ItemWire","ItemTankTrap","ItemSandbag",
"ItemMicrolight","ItemUltralight","ItemBike","ItemPbx"];
box_farm_weap=["huntingrifle","LeeEnfield","Winchester1866","Crossbow_DZ","MR43","RH_tt33",
"RH_anac","RH_p38","gms_k98","gms_k98_rg","VIL_SKS",
"gms_k98zf39","gms_mp40","ItemToolbox","ItemEtool","RH_m14"];

box_super_mags=["ItemMachete","ItemTent","ItemMicrolight",
"ItemUltralight","ItemBike","ItemPbx","TrashTinCan",
"TrashJackDaniels",
"ItemSodaEmpty",
"ItemSodaCoke",
"ItemSodaPepsi",
"FoodCanBakedBeans",
"FoodCanSardines",
"FoodCanFrankBeans",
"FoodCanPasta"];
box_super_weap=["ItemWatch","ItemCompass","ItemMap","RH_mk22","RH_m1911old","ItemWire",
"ItemKnife","ItemMatchbox","LeeEnfield","Winchester1866","Crossbow_DZ",
"Binocular","RH_browninghp","RH_mk22sd","ItemCanOpener"];




box_helicrash_mags=["Skin_Camo1_DZ","Skin_Sniper1_DZ","Skin_Sniper2_DZ","M136","PG7V",
"FHQ_rem_20Rnd_762x51_PMAG_T_SD","FHQ_rem_20Rnd_762x51_PMAG_T"];
box_helicrash_weap=["FN_FAL","FN_FAL_ANPVS4","Mk_48_DZ","M249_DZ","DMR","G36C_camo",
"G36_C_SD_camo","G36A_camo","SCAR_H_LNG_Sniper","VSS_vintorez","M40A3",
"Pecheneg","PK","SVD_NSPU_EP1","M136","RPG7V",
"RH_Deaglemzb","RH_deaglem","RH_deagle","RH_bull","FHQ_MSR_DESERT",
"BAF_LRR_scoped","FHQ_XM2010_DESERT","FHQ_ACR_WDL_HAMR_SD","FHQ_ACR_TAN_RCO_SD","KSVK",
"VIL_M24B","VIL_M110","VIL_SR25","VIL_G3A3","VIL_G3A2",
"VIL_G3A4b","VIL_AG3","VIL_HK33","VIL_Galil","VIL_Galil_arm",
"VIL_HK416_Eot","VIL_HK416_Aim","VIL_HK416_EDR","VIL_G3SG1","VIL_SVD_P21",
"VIL_SVU","R3F_HK417L_NF","FHQ_RSASS_TAN","FHQ_RSASS_SD_TAN","SCAR_H_CQC_CCO_SD ",
"SCAR_H_LNG_Sniper_SD","R3F_HK417M_AIM","R3F_HK417S_EOT_HG_DES","R3F_HK417S_HG_SD","R3F_HK417S_HG_SD_DES",
"R3F_Minimi_762_EOT_HG","R3F_Minimi_762_J4","R3F_Minimi_762_OB50","R3F_FRF2_J8_SD_DES","R3F_FRF2_J8_SD",
"R3F_FRF2_J8_DES"];


box_military_weap=["RH_m9","M16A2","M16A2GL","bizon_silenced","RH_m9csd","AK_74",
"M4A1_Aim","AKS_74_kobra","AKS_74_U","AK_47_M","vil_AKMSB",
"vil_AKM_GL","vil_AKMS_GP25","vil_AK_74m_gp","vil_AK_74m_gp_29","vil_AEK_GL",
"vil_Abakan_gp","vil_Groza_SD","vil_Groza_GL","vil_9a91_csd","vil_9a91",
"vil_Vikhr","vil_VAL_C","vil_AG36KA4","FFAA_Armas_HKMP510A3","FFAA_Armas_HKAG36K_eo",
"M1014","ffaa_Armas_p90","EB_S10","BB_ItemRadio","AK_107_GL_kobra",
"C1987_MP7","C1987_MP7_sd","C1987_MP7_eot","C1987_MP7_eot_sd","C1987_MP7_su_t",
"C1987_MP7_su_sd_t","MIDF_Aug_A3_gl","MIDF_Aug_A3_acog_gl","MIDF_Aug_A3_eotech_gl_black","M4A1",
"RH_m14aim","UZI_EP1","Remington870_lamp","RH_g17","MP5A5",
"MP5SD","M4A3_CCO_EP1","Binocular","ItemGPS","ItemEtool",
"Sa58P_EP1","Sa58V_EP1","UZI_SD_EP1","AK_107_GL_kobra","RH_uspm",
"RH_m1911sd","RH_uspsd","RH_p226","RH_muzi","RH_tec9",
"RH_vz61","M136","RPG7V","VIL_M70","VIL_AMD",
"VIL_MPi","VIL_PMIS","VIL_AEK_23","VIL_M64","RH_m1stacog",
"VIL_HK416_Eot","VIL_HK416_Aim","VIL_HK416_EDR","DDOPP_X26"];

box_militaryspecial_weap=["M16A2","M16A2GL","M249_DZ","RH_m9csd","AK_74","M4A1_Aim",
"AKS_74_kobra","AKS_74_U","AK_47_M","ffaa_Armas_p90","EB_S10",
"AK_107_GL_kobra","vil_AKMSB","vil_AKM_GL","vil_AKMS_GP25","vil_AK_74m_gp",
"vil_AK_74m_gp_29","vil_AEK_GL","vil_Abakan_gp","vil_Groza_SD","vil_Groza_GL",
"vil_9a91_csd","vil_9a91","vil_Vikhr","vil_VAL_C","vil_AG36KA4",
"FFAA_Armas_HKMP510A3","FFAA_Armas_HKAG36K_eo","C1987_MP7","C1987_MP7_sd","C1987_MP7_eot",
"C1987_MP7_eot_sd","C1987_MP7_su_t","C1987_MP7_su_sd_t","MIDF_Aug_A3_gl","MIDF_Aug_A3_acog_gl",
"MIDF_Aug_A3_eotech_gl_black","M24","SVD_CAMO","DMR","M4A1",
"RH_m14aim","UZI_EP1","Remington870_lamp","RH_g17","M240_DZ",
"M4A1_AIM_SD_camo","M16A4_ACG","M4A1_HWS_GL_camo","Mk_48_DZ","M32_EP1",
"M4A3_CCO_EP1","Binocular","ItemGPS","Sa58V_RCO_EP1","Sa58V_CCO_EP1",
"G36C_camo","VIL_M40A3","UZI_SD_EP1","SCAR_L_STD_HOLO","SCAR_L_STD_EGLM_RCO",
"m8_CarbineGL","m8_Sharpshooter","m8_SAW","SCAR_H_STD_EGLM_Spect","SCAR_L_STD_Mk4CQT",
"BAF_L85A2_UGL_ACOG","BAF_L85A2_RIS_Holo","BAF_L85A2_UGL_Holo","SCAR_L_CQC_CCO_SD","Saiga12K",
"VIL_M24B","RH_uspm","RH_m1911sd","RH_uspsd","RH_p226",
"RH_muzi","RH_tec9","RH_vz61","RH_python","G36C",
"RPG18","SMAW","M136","RPG7V","FHQ_ACR_BLK_CCO",
"FHQ_ACR_BLK_CCO_SD","FHQ_ACR_TAN_CCO","FHQ_ACR_WDL_IRN","FHQ_ACR_BLK_RCO_SD","FHQ_ACR_TAN_HWS_SD",
"FHQ_ACR_WDL_G33","FHQ_ACR_TAN_RCO","FHQ_ACR_WDL_HWS_GL","VIL_G3A4b","VIL_HK416_Eot",
"VIL_HK416_Aim","VIL_HK416_EDR","VIL_Mg3","VIL_FnMag","skaVIL_M60",
"RH_m1stacog","FN_FAL_ANPVS4","FHQ_ACR_WDL_HAMR_SD","RH_m40a5","RH_m40a1",
"R3F_FRF2_J8","R3F_Minimi_EOT","R3F_Minimi_762_EOT_HG","R3F_AT4CS","NVGoggles",
"R3F_Famas_G2","R3F_Famas_G2_AIM","R3F_Famas_G2_AIM_DES","R3F_Famas_G2_EOT","R3F_Famas_G2_EOT_DES",
"R3F_Famas_surb_EOT_SD_DES","R3F_Famas_surb_AIM_SD_DES","R3F_Famas_surb_AIM_SD","R3F_Famas_surb_AIM_HG_DES","R3F_Famas_G2_AIM_M203",
"R3F_Famas_G2_AIM_HG","R3F_Famas_G2_J4_HG_DES","R3F_Famas_G2_J4_HG","R3F_Famas_G2_J4_DES","R3F_Famas_F1_EOT_HG_SD",
"R3F_Famas_F1_EOT_HG_SD_DES","R3F_Famas_F1_EOT"];


box_explosive_mags=["PipeBomb"];
box_explosive_weap=["RPG18","SMAW","M136","RPG7V","R3F_AT4CS","MetisLauncher",
"M47Launcher_EP1"];


box_military_mags=["ItemSandbag",
"Skin_Camo5_DZ","Skin_Camo4_DZ","Skin_Camo6_DZ","Skin_Camo7_DZ","Skin_Camo8_DZ",
"Skin_Camo9_DZ","Skin_Camo10_DZ","Skin_Camo11_DZ","Skin_Camo12_DZ","Skin_Camo13_DZ"
];
box_militaryspecial_mags=["PipeBomb",
"20Rnd_762x51_FNFAL","Skin_Camo4_DZ","Skin_Sniper2_DZ","20rnd_762x51_B_SCAR","10Rnd_9x39_SP5_VSS",
"Skin_Camo1_DZ","ItemSandbag","Skin_Camo6_DZ","Skin_Camo7_DZ","Skin_Camo8_DZ",
"Skin_Camo9_DZ","Skin_Camo10_DZ","Skin_Camo11_DZ","Skin_Camo12_DZ","Skin_Camo13_DZ",
"FHQ_rem_20Rnd_762x51_PMAG_T"];

box_backpacks=["DZ_ALICE_Pack_EP1","DZ_TK_Assault_Pack_EP1","DZ_British_ACU","DZ_CivilBackpack_EP1","DZ_Backpack_EP1","DZ_MilitarBackpack","DZ_SuperBackpack","DZ_Patrol_Pack_EP1","DZ_Assault_Pack_EP1","DZ_Czech_Vest_Puch"];



box_medical_mags=["ItemBandage","ItemPainkiller","ItemMorphine","ItemEpinephrine","ItemBloodbag","ItemAntibiotic"];

box_types = ["military","medical","residencial","militarySpecial","industrial","helicrash","explosive"];
box_levels=["low","medium","high"];
box_mission_random = {
    _box= _this select 0;
    _level=_this select 1;
    
    _type = box_types call BIS_fnc_selectRandom;
    
    if(_type == "helicrash") then {
        _rand = random 1;
        if(_rand <0.7) then {
            _type = "military";
        };
        
    };
    
    
    
    if(_level == "") then {
    
        _level = box_levels call BIS_fnc_selectRandom;
    };
    [_box,_type,_level] call box_mission_fill;

};

box_mission_fill = {

    
    _crate= _this select 0;
    _type=_this select 1;//["medical","military","residencial","militarySpecial","industrial","helicrash"];
    _level=_this select 2;//["low","medium","high"];
        
        
    clearWeaponCargoGlobal _crate;
    clearMagazineCargoGlobal _crate;
        
    
   
    hint ( format["%1 , %2,",_type,_level]);
    
    _weapons=[];
    _mags=[];
        
    _countmag=0;
    _countback=0;
    _countbackmax=6;
    _countmax=50;
        
    _spawnProbWep = 1;
    _spawnProbAmmo = 1;
    _miscProb = 1;
    _medicalProb = 1;
        
    switch (_type) do
    {
        case "medical"    : {_weapons=box_residencial_weap;_mags=box_medical_mags;};
        case "military"   : {_weapons=box_military_weap;_mags=box_military_mags;};
        case "residencial"   : {_weapons=box_super_weap;_mags=box_super_mags;};
        case "militarySpecial"   : {_weapons=box_militaryspecial_weap;_mags=box_militaryspecial_mags;};
        case "industrial"   : {_weapons=box_industrial_weap;_mags=box_industrial_mags;};
        case "helicrash"   : {_weapons=box_helicrash_weap;_mags=box_helicrash_mags;};
        case "explosive"   : {_weapons=box_explosive_weap;_mags=box_explosive_mags;_countmax=5;_miscProb=0.7;};
    };
    
    _fixedLoops=10;
    _loops=10;
    switch (_level) do
    {
        case "low"    : {_fixedLoops=1;};
        case "medium"    : {_fixedLoops=5;};
        case "high"    : {_fixedLoops=10;};
       
    };
    _loops = _fixedLoops + (floor(random 10) + 1);


    

    for "_i" from 0 to _loops do {
        
        _weaponAmt1 = floor(random 2);
	_ammoAmt1 = floor(random 5);
	_miscAmt1 = floor(random 7);
	_medicalAmt1 = floor(random 6);
        
        if (_weaponAmt1 < 1) then {_weaponAmt1 = 1};
	if (_ammoAmt1 < 1) then {_ammoAmt1 = 1};
	if (_miscAmt1 < 1) then {_miscAmt1 = 1};
	if (_medicalAmt1 < 1) then {_medicalAmt1 = 1};
        
        //Spawn weapon and ammo
        _rand =	random 1;
	if (_spawnProbWep >= _rand) then {
            _weapon = _weapons call BIS_fnc_selectRandom;
            if (_weapon !="") then
            {
                _magazine = getArray (configFile >> "CfgWeapons" >> _weapon >> "magazines") select 0;
                _crate addWeaponCargoGlobal [_weapon, _weaponAmt1];
                _rand = random 1;
                //!(isNil _magazine) && 
                if (_spawnProbAmmo >= _rand) then { 
                    _crate addMagazineCargoGlobal [_magazine, _ammoAmt1];
                };
            };
	};
        //Spawn in misc items
	_rand =	random 1;
        
        
	if (_miscProb >= _rand) then {
            _rand = random 1;
            if ((_rand < 0.7) and (_countmag <_countmax)) then {
                _miscItem = _mags call BIS_fnc_selectRandom;
                
                _crate addMagazineCargoGlobal [_miscItem, _miscAmt1];
                _countmag = _countmag +1;
                
            }; 
	};

        //Spawnear mochis
        _backpack = box_backpacks call BIS_fnc_selectRandom;
	if ((random 1 > 0.5) and (_countback <= _countbackmax)) then {
            _crate addBackpackCargoGlobal [_backpack,1];
            _countback = _countback +1;
	};
            
    };

};